{% extends 'layout.html.twig' %}

{% block content %}
<h1>Je suis dans la page d'admin qui liste tous les produits</h1>

<div class="row m-4">
    <a href="{{ path('admin_produit_add') }}" class="btn btn-primary">Ajouter un produit</a>
</div>

<table class="table table-bordered">
    <thead>
        <tr>
         <th>Photo</th>
         <th>Id du produit</th>
         <th>Titre</th>
         <th>Description</th>
         <th>Taille</th>
         <th>Couleur</th>
         <th>Stock</th>
         <th>Prix</th>
         <th colspan="3 text text-center">Action</th>
        </tr>
    </thead> 


<tbody> {% for pdt in produits %}
        <tr>
            <td><img src="{{ asset('photo/' ~ pdt.photo) }}"  class="card-img-top"></td>
            <td>{{ pdt.id}}</td>
            <td>{{ pdt.titre}}</td>
            <td>{{ pdt.description}}</td>
            <td>{{ pdt.taille}}</td>
            <td>{{ pdt.couleur}}</td>
            {% if pdt.stock == 0 %}
            <td class="text text-danger">{{ pdt.stock }}</td>
            {% elseif pdt.stock <= 20 %}
            <td class="text text-warning">{{ pdt.stock }}</td>
            {% else %}
            <td class="text text-success">{{ pdt.stock }}</td>
            {% endif %}
            <td>{{ pdt.prix}}</td>
            <td><a href="{{ path('produit', {'id':pdt.id} ) }}" target="_blank"><i class="fas fa-eye text-dark"></i></a></td>
            <td><a href="{{ path('admin_produit_update', {'id':pdt.id} ) }}"><i class="fas fa-edit text-dark"></i></a></td>

            {# ici j'envoie en lien le nom de la route pour la methode adminProduitDeleteAction() dans AdminController.php qui attends un id :pdt.id #}
            <td><a href="{{ path('admin_produit_delete', {'id' : pdt.id} ) }}"><i class="fas fa-trash text-dark"></i></a></td>
        </tr>
    {% endfor %}  
    </tbody>
   </table>   
{% endblock %}